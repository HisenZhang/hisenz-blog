---
export const prerender = true

import BaseLayout from '../layouts/BaseLayout.astro'
import { createReader } from '@keystatic/core/reader'
import keystaticConfig from '../../keystatic.config'

const reader = createReader(process.cwd(), keystaticConfig)
const aboutData = await reader.singletons.about.read()

// Fallback to defaults if data not yet configured
const about = aboutData || {
	title: 'About Me',
	content: null,
}
---

<BaseLayout>
	<main class="app-container pt-36">
		<h1 class="text-6xl pb-2 font-bold">{about.title}</h1>
	</main>
	<section class="app-container py-12 mb-8">
		<div
			class="prose prose-neutral prose-lg md:prose-xl dark:prose-invert prose-img:rounded-xl prose-figure:text-center prose-img:mx-auto"
		>
			{about.content ? (
				<div set:html={await about.content()} />
			) : (
				<p>Configure your about page content in the admin panel.</p>
			)}
		</div>
	</section>
</BaseLayout>
